<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <title>ATK Shop</title>
    <script src="https://cdn.tailwindcss.com"></script>
</head>

<body class="bg-gray-100">
    <nav class="bg-blue-600 text-white p-4 flex justify-between">
        <h1 class="text-xl font-bold">ATK Online Store</h1>
        <div>
            <button onclick="window.location.href='login.html'"
                class="bg-white text-blue-600 px-4 py-2 rounded shadow">Login</button>
        </div>
    </nav>

    <section class="p-6">
        <h2 class="text-2xl font-semibold mb-4">Produk Tersedia</h2>
        <div id="product-list" class="grid grid-cols-1 md:grid-cols-3 gap-4"></div>
    </section>

    <script>
        const API = "https://YOUR-RAILWAY-APP.up.railway.app";

        async function loadProducts() {
            const res = await fetch(`${API}/api/products`);
            const products = await res.json();

            const container = document.getElementById("product-list");
            container.innerHTML = "";

            products.forEach(p => {
                container.innerHTML += `
                <div class="bg-white p-4 rounded shadow">
                    <h3 class="text-xl font-bold mb-2">${p.name}</h3>
                    <p>Harga: Rp ${p.price}</p>
                    <p>Stok: ${p.stock}</p>
                    <button onclick="addToCart(${p.id})"
                        class="bg-blue-600 text-white px-4 py-2 mt-3 rounded">Add to Cart</button>
                </div>`;
            });
        }

        function addToCart(id) {
            const user = localStorage.getItem("currentUser");

            if (!user) {
                alert("Silakan login terlebih dahulu.");
                window.location.href = "login.html";
                return;
            }

            fetch(`${API}/api/cart`, {
                method: "POST",
                headers: { "Content-Type": "application/json" },
                body: JSON.stringify({ productId: id })
            });

            alert("Produk ditambahkan ke keranjang!");
        }

        loadProducts();
    </script>
</body>

</html>
